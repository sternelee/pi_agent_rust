{
  "schema": "pi.ext.legacy_fixtures.v1",
  "extension": {
    "id": "dynamic-resources",
    "source": {
      "commit": "df5b0f76c026b35fdd7f0fb78cb0dbaaf939c1b5",
      "path": "packages/coding-agent/examples/extensions/dynamic-resources"
    },
    "checksum": {
      "sha256": "7d9bc974bd48ecf0cd39e326b0d53815d1c17228ec14e14da63710ba79540788"
    }
  },
  "legacy": {
    "pi_mono_head": "df5b0f76c026b35fdd7f0fb78cb0dbaaf939c1b5",
    "node_version": "v20.19.4",
    "npm_version": "9.2.0"
  },
  "capture": {
    "provider": "openai",
    "model": "gpt-4o-mini",
    "no_env": true
  },
  "scenarios": [
    {
      "id": "scn-dynamic-resources-001",
      "kind": "event",
      "summary": "Returns skill/prompt/theme resources from the extension directory",
      "event_name": "resources_discover",
      "tool_name": null,
      "command_name": null,
      "provider_id": null,
      "input": null,
      "setup": null,
      "steps": [],
      "expect": {
        "returns_contains": {
          "promptPaths": [
            "dynamic.md"
          ],
          "skillPaths": [
            "SKILL.md"
          ],
          "themePaths": [
            "dynamic.json"
          ]
        },
        "no_error": true
      },
      "outputs": {
        "stdout_normalized_jsonl": [
          "{\"command\":\"get_commands\",\"data\":{\"commands\":[{\"description\":\"Example prompt template loaded from resources_discover (path:dynamic)\",\"location\":\"path\",\"name\":\"dynamic\",\"path\":\"<PI_MONO_ROOT>/packages/coding-agent/examples/extensions/dynamic-resources/dynamic.md\",\"source\":\"template\"},{\"description\":\"Example skill loaded from resources_discover\",\"location\":\"path\",\"name\":\"skill:dynamic-resources\",\"path\":\"<PI_MONO_ROOT>/packages/coding-agent/examples/extensions/dynamic-resources/SKILL.md\",\"source\":\"skill\"}]},\"id\":\"cmd-1\",\"success\":true,\"type\":\"response\"}"
        ],
        "meta_normalized": {
          "agent_dir": "target/legacy_capture/scn-dynamic-resources-001/<RUN_ID>/agent",
          "env": {
            "TZ": "UTC",
            "no_env": true
          },
          "exit": {
            "code": null,
            "success": false
          },
          "extension_id": "dynamic-resources",
          "finished_at": "<TIMESTAMP>",
          "mock_openai": {
            "base_url": "http://127.0.0.1:<PORT>/v1"
          },
          "model": "gpt-4o-mini",
          "models_json": "target/legacy_capture/scn-dynamic-resources-001/<RUN_ID>/agent/models.json",
          "node_preload": null,
          "pi_mono": {
            "extension_path": "packages/coding-agent/examples/extensions/dynamic-resources",
            "head": "df5b0f76c026b35fdd7f0fb78cb0dbaaf939c1b5",
            "manifest_checksum_sha256": "7d9bc974bd48ecf0cd39e326b0d53815d1c17228ec14e14da63710ba79540788",
            "manifest_commit": "df5b0f76c026b35fdd7f0fb78cb0dbaaf939c1b5",
            "root": "legacy_pi_mono_code/pi-mono"
          },
          "provider": "openai",
          "run_id": "<RUN_ID>",
          "scenario_event_name": "resources_discover",
          "scenario_id": "scn-dynamic-resources-001",
          "scenario_kind": "event",
          "schema": "pi.legacy_capture.v1",
          "seed_session": null,
          "settings_json": "target/legacy_capture/scn-dynamic-resources-001/<RUN_ID>/agent/settings.json",
          "started_at": "<TIMESTAMP>"
        },
        "capture_log_normalized_jsonl": [
          "{\"correlation\":{\"extension_id\":\"dynamic-resources\",\"run_id\":\"<RUN_ID>\",\"scenario_id\":\"scn-dynamic-resources-001\"},\"data\":{\"extension_path\":\"packages/coding-agent/examples/extensions/dynamic-resources\",\"legacy_head\":\"df5b0f76c026b35fdd7f0fb78cb0dbaaf939c1b5\",\"manifest_checksum_sha256\":\"7d9bc974bd48ecf0cd39e326b0d53815d1c17228ec14e14da63710ba79540788\",\"manifest_commit\":\"df5b0f76c026b35fdd7f0fb78cb0dbaaf939c1b5\",\"model\":\"gpt-4o-mini\",\"node_version\":\"v20.19.4\",\"npm_version\":\"9.2.0\",\"pi_mono_root\":\"legacy_pi_mono_code/pi-mono\",\"provider\":\"openai\",\"scenario_command_name\":null,\"scenario_event_name\":\"resources_discover\",\"scenario_kind\":\"event\",\"scenario_provider_id\":null,\"scenario_tool_name\":null,\"started_at\":\"<TIMESTAMP>\"},\"event\":\"capture\",\"level\":\"info\",\"message\":\"capture.start\",\"schema\":\"pi.ext.log.v1\",\"source\":{\"component\":\"capture\",\"pid\":2999939},\"ts\":\"2026-02-03T12:37:16.796Z\"}",
          "{\"correlation\":{\"extension_id\":\"dynamic-resources\",\"run_id\":\"<RUN_ID>\",\"scenario_id\":\"scn-dynamic-resources-001\"},\"event\":\"capture\",\"level\":\"info\",\"message\":\"capture.finish\",\"schema\":\"pi.ext.log.v1\",\"source\":{\"component\":\"capture\",\"pid\":2999939},\"ts\":\"2026-02-03T12:37:19.100Z\"}"
        ]
      }
    },
    {
      "id": "scn-dynamic-resources-neg-001",
      "kind": "event",
      "summary": "Negative: event handler errors on unsupported event type",
      "expect": {
        "is_error": true
      }
    }
  ]
}
