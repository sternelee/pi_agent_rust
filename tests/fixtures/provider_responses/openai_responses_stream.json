{
  "version": "1.0",
  "provider": "openai_responses",
  "cases": [
    {
      "name": "text_basic",
      "events": [
        {
          "type": "response.output_text.delta",
          "item_id": "msg_1",
          "content_index": 0,
          "delta": "Hello "
        },
        {
          "type": "response.output_text.delta",
          "item_id": "msg_1",
          "content_index": 0,
          "delta": "world"
        },
        {
          "type": "response.completed",
          "response": {
            "incomplete_details": null,
            "usage": { "input_tokens": 5, "output_tokens": 2, "total_tokens": 7 }
          }
        }
      ],
      "expected": [
        { "kind": "start" },
        { "kind": "text_start", "content_index": 0 },
        { "kind": "text_delta", "content_index": 0, "delta": "Hello " },
        { "kind": "text_delta", "content_index": 0, "delta": "world" },
        { "kind": "text_end", "content_index": 0, "content": "Hello world" },
        { "kind": "done", "reason": "stop" }
      ]
    },
    {
      "name": "text_multi_chunk",
      "events": [
        {
          "type": "response.output_text.delta",
          "item_id": "msg_2",
          "content_index": 0,
          "delta": "First "
        },
        {
          "type": "response.output_text.delta",
          "item_id": "msg_2",
          "content_index": 0,
          "delta": "second "
        },
        {
          "type": "response.output_text.delta",
          "item_id": "msg_2",
          "content_index": 0,
          "delta": "third"
        },
        {
          "type": "response.completed",
          "response": {
            "incomplete_details": null,
            "usage": { "input_tokens": 10, "output_tokens": 3, "total_tokens": 13 }
          }
        }
      ],
      "expected": [
        { "kind": "start" },
        { "kind": "text_start", "content_index": 0 },
        { "kind": "text_delta", "content_index": 0, "delta": "First " },
        { "kind": "text_delta", "content_index": 0, "delta": "second " },
        { "kind": "text_delta", "content_index": 0, "delta": "third" },
        { "kind": "text_end", "content_index": 0, "content": "First second third" },
        { "kind": "done", "reason": "stop" }
      ]
    },
    {
      "name": "tool_call",
      "events": [
        {
          "type": "response.output_item.added",
          "output_index": 0,
          "item": {
            "type": "function_call",
            "id": "fc_1",
            "call_id": "call_001",
            "name": "read_file",
            "arguments": ""
          }
        },
        {
          "type": "response.function_call_arguments.delta",
          "item_id": "fc_1",
          "output_index": 0,
          "delta": "{\"path\""
        },
        {
          "type": "response.function_call_arguments.delta",
          "item_id": "fc_1",
          "output_index": 0,
          "delta": ": \"/tmp/test.txt\"}"
        },
        {
          "type": "response.output_item.done",
          "output_index": 0,
          "item": {
            "type": "function_call",
            "id": "fc_1",
            "call_id": "call_001",
            "name": "read_file",
            "arguments": "{\"path\": \"/tmp/test.txt\"}",
            "status": "completed"
          }
        },
        {
          "type": "response.completed",
          "response": {
            "incomplete_details": null,
            "usage": { "input_tokens": 20, "output_tokens": 15, "total_tokens": 35 }
          }
        }
      ],
      "expected": [
        { "kind": "start" },
        { "kind": "other" },
        { "kind": "other" },
        { "kind": "other" },
        { "kind": "other" },
        { "kind": "done", "reason": "tool_use" }
      ]
    },
    {
      "name": "reasoning_then_text",
      "events": [
        {
          "type": "response.reasoning_summary_text.delta",
          "item_id": "rs_1",
          "summary_index": 0,
          "delta": "Let me "
        },
        {
          "type": "response.reasoning_summary_text.delta",
          "item_id": "rs_1",
          "summary_index": 0,
          "delta": "think about this."
        },
        {
          "type": "response.output_text.delta",
          "item_id": "msg_4",
          "content_index": 0,
          "delta": "The answer is 42."
        },
        {
          "type": "response.completed",
          "response": {
            "incomplete_details": null,
            "usage": { "input_tokens": 15, "output_tokens": 10, "total_tokens": 25 }
          }
        }
      ],
      "expected": [
        { "kind": "start" },
        { "kind": "other" },
        { "kind": "other" },
        { "kind": "other" },
        { "kind": "text_start", "content_index": 1 },
        { "kind": "text_delta", "content_index": 1, "delta": "The answer is 42." },
        { "kind": "text_end", "content_index": 1, "content": "The answer is 42." },
        { "kind": "other" },
        { "kind": "done", "reason": "stop" }
      ]
    },
    {
      "name": "max_tokens_finish",
      "events": [
        {
          "type": "response.output_text.delta",
          "item_id": "msg_5",
          "content_index": 0,
          "delta": "truncated output"
        },
        {
          "type": "response.output_text.delta",
          "item_id": "msg_5",
          "content_index": 0,
          "delta": "..."
        },
        {
          "type": "response.incomplete",
          "response": {
            "incomplete_details": { "reason": "max_output_tokens" },
            "usage": { "input_tokens": 100, "output_tokens": 4096, "total_tokens": 4196 }
          }
        }
      ],
      "expected": [
        { "kind": "start" },
        { "kind": "text_start", "content_index": 0 },
        { "kind": "text_delta", "content_index": 0, "delta": "truncated output" },
        { "kind": "text_delta", "content_index": 0, "delta": "..." },
        { "kind": "text_end", "content_index": 0, "content": "truncated output..." },
        { "kind": "done", "reason": "length" }
      ]
    },
    {
      "name": "text_then_tool_call",
      "events": [
        {
          "type": "response.output_text.delta",
          "item_id": "msg_6",
          "content_index": 0,
          "delta": "Let me check."
        },
        {
          "type": "response.output_item.added",
          "output_index": 1,
          "item": {
            "type": "function_call",
            "id": "fc_bash",
            "call_id": "call_bash01",
            "name": "bash",
            "arguments": ""
          }
        },
        {
          "type": "response.function_call_arguments.delta",
          "item_id": "fc_bash",
          "output_index": 1,
          "delta": "{\"command\": \"ls\"}"
        },
        {
          "type": "response.output_item.done",
          "output_index": 1,
          "item": {
            "type": "function_call",
            "id": "fc_bash",
            "call_id": "call_bash01",
            "name": "bash",
            "arguments": "{\"command\": \"ls\"}",
            "status": "completed"
          }
        },
        {
          "type": "response.completed",
          "response": {
            "incomplete_details": null,
            "usage": { "input_tokens": 25, "output_tokens": 20, "total_tokens": 45 }
          }
        }
      ],
      "expected": [
        { "kind": "start" },
        { "kind": "text_start", "content_index": 0 },
        { "kind": "text_delta", "content_index": 0, "delta": "Let me check." },
        { "kind": "other" },
        { "kind": "other" },
        { "kind": "other" },
        { "kind": "text_end", "content_index": 0, "content": "Let me check." },
        { "kind": "done", "reason": "tool_use" }
      ]
    },
    {
      "name": "error_event",
      "events": [
        {
          "type": "response.output_text.delta",
          "item_id": "msg_7",
          "content_index": 0,
          "delta": "partial"
        },
        {
          "type": "error",
          "message": "server overloaded"
        }
      ],
      "expected": [
        { "kind": "start" },
        { "kind": "text_start", "content_index": 0 },
        { "kind": "text_delta", "content_index": 0, "delta": "partial" },
        { "kind": "error", "reason": "error" }
      ]
    }
  ]
}
