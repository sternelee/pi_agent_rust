run_started_utc=20260206T185039Z
models_path=/home/ubuntu/.pi/agent/models.json
provider_filter=openai
record_mode=0
providers=openai
[2026-02-06T18:50:39Z] running provider=openai
    Blocking waiting for file lock on artifact directory
   Compiling pi_agent_rust v0.1.0 (/data/projects/pi_agent_rust)
[bubbletea-macros] Deriving Model for: PiApp
[bubbletea-macros] Deriving Model for: SessionPicker
    Finished `test` profile [unoptimized + debuginfo] target(s) in 1m 35s
     Running tests/e2e_live_harness.rs (target/debug/deps/e2e_live_harness-4fec7ec2b3c541ce)

running 1 test
2026-02-06T18:52:15.551270Z DEBUG ThreadId(02) region{region_id=RegionId(0:0) parent_region_id=None state="Open" initial_budget_deadline=None initial_budget_poll_quota=4294967295}: asupersync::record::region: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/record/region.rs:312: region created region_id=RegionId(0:0) parent_region_id=None state="Open" budget_deadline=None budget_poll_quota=4294967295
2026-02-06T18:52:15.614316Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:231: Loaded native root certificates count=151
2026-02-06T18:52:15.614511Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:492: TlsConnector built alpn=[[104, 116, 116, 112, 47, 49, 46, 49]] sni=true
2026-02-06T18:52:15.671019Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:231: Loaded native root certificates count=151
2026-02-06T18:52:15.671142Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:492: TlsConnector built alpn=[[104, 116, 116, 112, 47, 49, 46, 49]] sni=true
2026-02-06T18:52:15.671509Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:239: VCR recording request cassette_path=/tmp/.tmp7GCzxj/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json request=POST https://api.openai.com/v1/responses body_sha256=931fa889007f body_text_sha256=<none>
2026-02-06T18:52:15.671579Z DEBUG ThreadId(02) pi::vcr: src/vcr.rs:276: VCR record: sending streaming HTTP request cassette_path=/tmp/.tmp7GCzxj/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json request=POST https://api.openai.com/v1/responses body_sha256=931fa889007f body_text_sha256=<none>
2026-02-06T18:52:15.679076Z DEBUG ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:266: TLS handshake complete
2026-02-06T18:52:15.679142Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:479: TLS write bytes=352
2026-02-06T18:52:15.679163Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:479: TLS write bytes=283
2026-02-06T18:52:15.902300Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=1369
2026-02-06T18:52:15.902511Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=1392
2026-02-06T18:52:16.061528Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=540
2026-02-06T18:52:16.079531Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=266
2026-02-06T18:52:16.082811Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=266
2026-02-06T18:52:16.114951Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=838
2026-02-06T18:52:16.248193Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=1227
2026-02-06T18:52:16.248319Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=5
2026-02-06T18:52:16.248408Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:318: VCR record: captured streaming response cassette_path=/tmp/.tmp7GCzxj/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json status=200 header_count=17 chunk_count=7 body_bytes=4842
2026-02-06T18:52:16.248548Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:345: VCR record: redacted sensitive data cassette_path=/tmp/.tmp7GCzxj/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json headers_redacted=1 json_fields_redacted=0
2026-02-06T18:52:16.249154Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:352: VCR record: saved cassette cassette_path=/tmp/.tmp7GCzxj/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json

thread 'e2e_live_provider_harness_smoke' (326248) panicked at tests/e2e_live_harness.rs:187:5:
raw live provider results contains unredacted sensitive material:
raw live provider results[1]: usage.totalTokens
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
2026-02-06T18:52:16.259618Z  INFO ThreadId(02) region{region_id=RegionId(0:0) parent_region_id=None state="Open" initial_budget_deadline=None initial_budget_poll_quota=4294967295}: asupersync::record::region: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/record/region.rs:303: close time.busy=0.00ns time.idle=708ms
[1;31m
=== TEST FAILED: e2e_live_provider_harness_smoke ===
[0m[2m[   0.000s][0m [32mINFO [0m [2m[harness][0m Test 'e2e_live_provider_harness_smoke' started
[2m[   0.000s][0m [32mINFO [0m [2m[harness][0m Temp directory created
[2m           path[0m = /tmp/.tmp7GCzxj
[2m[   0.000s][0m [32mINFO [0m [2m[live_e2e][0m Loaded live provider registry
[2m           agent_dir[0m = /home/ubuntu/.pi/agent
[2m           models_path[0m = /home/ubuntu/.pi/agent/models.json
[2m           auth_path[0m = /home/ubuntu/.pi/agent/auth.json
[2m           models[0m = 25
[2m           available[0m = 25
[2m[   0.065s][0m [32mINFO [0m [2m[live_e2e][0m Invoking live provider call
[2m           provider[0m = openai
[2m           model[0m = gpt-4o-mini
[2m           api[0m = openai-responses
[2m           timeout_s[0m = 30
[2m           prompt[0m = Say just the word hello.
[2m           vcr_path[0m = /tmp/.tmp7GCzxj/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json
[2m[   0.700s][0m [32mINFO [0m [2m[live_e2e][0m Provider call completed
[2m           provider[0m = openai
[2m           model[0m = gpt-4o-mini
[2m           status[0m = passed
[2m           elapsed_ms[0m = 698
[2m           response_status[0m = 200
[2m           request_url[0m = https://api.openai.com/v1/responses
[2m           request_body_bytes[0m = 283
[2m           events[0m = 5
[2m           tool_calls[0m = 0
[2m           text_chars[0m = 6
[2m           thinking_chars[0m = 0
[2m           usage_input[0m = 31
[2m           usage_output[0m = 3
[2m           usage_total[0m = 34
[2m           stop_reason[0m = Stop
[2m[   0.710s][0m [32mINFO [0m [2m[harness][0m Test completing
[2m           elapsed[0m = 0.710s
=== ARTIFACTS ===
[   0.700s] live_provider_results.jsonl -> /tmp/.tmp7GCzxj/live_provider_results.jsonl
[   0.700s] live_provider_results.contract.jsonl -> /tmp/.tmp7GCzxj/live_provider_results.contract.jsonl
[   0.700s] live_provider_costs.jsonl -> /tmp/.tmp7GCzxj/live_provider_costs.jsonl
[   0.701s] live_provider_log.jsonl -> /tmp/.tmp7GCzxj/live_provider_log.jsonl
[   0.706s] live_provider_log.normalized.jsonl -> /tmp/.tmp7GCzxj/live_provider_log.normalized.jsonl
[   0.706s] live_provider_artifacts.jsonl -> /tmp/.tmp7GCzxj/live_provider_artifacts.jsonl
[   0.707s] live_provider_artifacts.normalized.jsonl -> /tmp/.tmp7GCzxj/live_provider_artifacts.normalized.jsonl
[   0.707s] export/live_provider_results.raw.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T185039Z/openai/export/live_provider_results.raw.jsonl
[   0.707s] export/live_provider_results.contract.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T185039Z/openai/export/live_provider_results.contract.jsonl
[   0.707s] export/live_provider_costs.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T185039Z/openai/export/live_provider_costs.jsonl
[   0.707s] export/live_provider_log.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T185039Z/openai/export/live_provider_log.jsonl
[   0.707s] export/live_provider_log.normalized.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T185039Z/openai/export/live_provider_log.normalized.jsonl
[   0.707s] export/live_provider_artifacts.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T185039Z/openai/export/live_provider_artifacts.jsonl
[   0.707s] export/live_provider_artifacts.normalized.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T185039Z/openai/export/live_provider_artifacts.normalized.jsonl
=== END ARTIFACTS ===
=== END LOGS ===

test e2e_live_provider_harness_smoke ... FAILED

failures:

failures:
    e2e_live_provider_harness_smoke

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 43 filtered out; finished in 0.72s

error: test failed, to rerun pass `--test e2e_live_harness`
