    Blocking waiting for file lock on artifact directory
   Compiling pi_agent_rust v0.1.0 (/data/projects/pi_agent_rust)
[bubbletea-macros] Deriving Model for: PiApp
[bubbletea-macros] Deriving Model for: SessionPicker
    Finished `test` profile [unoptimized + debuginfo] target(s) in 54.38s
     Running tests/e2e_live_harness.rs (target/debug/deps/e2e_live_harness-4fec7ec2b3c541ce)

running 1 test
2026-02-06T18:48:26.969582Z DEBUG ThreadId(02) region{region_id=RegionId(0:0) parent_region_id=None state="Open" initial_budget_deadline=None initial_budget_poll_quota=4294967295}: asupersync::record::region: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/record/region.rs:312: region created region_id=RegionId(0:0) parent_region_id=None state="Open" budget_deadline=None budget_poll_quota=4294967295
2026-02-06T18:48:27.040249Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:231: Loaded native root certificates count=151
2026-02-06T18:48:27.040427Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:492: TlsConnector built alpn=[[104, 116, 116, 112, 47, 49, 46, 49]] sni=true
2026-02-06T18:48:27.098201Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:231: Loaded native root certificates count=151
2026-02-06T18:48:27.098325Z DEBUG ThreadId(02) asupersync::tls::connector: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/connector.rs:492: TlsConnector built alpn=[[104, 116, 116, 112, 47, 49, 46, 49]] sni=true
2026-02-06T18:48:27.098680Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:239: VCR recording request cassette_path=/tmp/.tmpgC3Hxi/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json request=POST https://api.openai.com/v1/responses body_sha256=931fa889007f body_text_sha256=<none>
2026-02-06T18:48:27.098749Z DEBUG ThreadId(02) pi::vcr: src/vcr.rs:276: VCR record: sending streaming HTTP request cassette_path=/tmp/.tmpgC3Hxi/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json request=POST https://api.openai.com/v1/responses body_sha256=931fa889007f body_text_sha256=<none>
2026-02-06T18:48:27.117528Z DEBUG ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:266: TLS handshake complete
2026-02-06T18:48:27.117646Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:479: TLS write bytes=352
2026-02-06T18:48:27.117668Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:479: TLS write bytes=283
2026-02-06T18:48:27.302299Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=1369
2026-02-06T18:48:27.302561Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=1392
2026-02-06T18:48:27.588234Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=540
2026-02-06T18:48:27.596602Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=266
2026-02-06T18:48:27.596754Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=266
2026-02-06T18:48:27.627372Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=235
2026-02-06T18:48:27.629629Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=609
2026-02-06T18:48:27.706797Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=1227
2026-02-06T18:48:27.706941Z TRACE ThreadId(02) asupersync::tls::stream: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/tls/stream.rs:419: TLS read bytes=5
2026-02-06T18:48:27.707062Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:318: VCR record: captured streaming response cassette_path=/tmp/.tmpgC3Hxi/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json status=200 header_count=17 chunk_count=8 body_bytes=4842
2026-02-06T18:48:27.707233Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:345: VCR record: redacted sensitive data cassette_path=/tmp/.tmpgC3Hxi/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json headers_redacted=1 json_fields_redacted=0
2026-02-06T18:48:27.708020Z  INFO ThreadId(02) pi::vcr: src/vcr.rs:352: VCR record: saved cassette cassette_path=/tmp/.tmpgC3Hxi/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json

thread 'e2e_live_provider_harness_smoke' (153761) panicked at tests/e2e_live_harness.rs:174:5:
raw live provider results contains unredacted sensitive material:
raw live provider results[1]: usage.totalTokens
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
2026-02-06T18:48:27.720764Z  INFO ThreadId(02) region{region_id=RegionId(0:0) parent_region_id=None state="Open" initial_budget_deadline=None initial_budget_poll_quota=4294967295}: asupersync::record::region: /home/ubuntu/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/asupersync-0.1.0/src/record/region.rs:303: close time.busy=0.00ns time.idle=751ms
[1;31m
=== TEST FAILED: e2e_live_provider_harness_smoke ===
[0m[2m[   0.000s][0m [32mINFO [0m [2m[harness][0m Test 'e2e_live_provider_harness_smoke' started
[2m[   0.000s][0m [32mINFO [0m [2m[harness][0m Temp directory created
[2m           path[0m = /tmp/.tmpgC3Hxi
[2m[   0.000s][0m [32mINFO [0m [2m[live_e2e][0m Loaded live provider registry
[2m           agent_dir[0m = /home/ubuntu/.pi/agent
[2m           models_path[0m = /home/ubuntu/.pi/agent/models.json
[2m           auth_path[0m = /home/ubuntu/.pi/agent/auth.json
[2m           models[0m = 25
[2m           available[0m = 25
[2m[   0.072s][0m [32mINFO [0m [2m[live_e2e][0m Invoking live provider call
[2m           provider[0m = openai
[2m           model[0m = gpt-4o-mini
[2m           api[0m = openai-responses
[2m           timeout_s[0m = 30
[2m           prompt[0m = Say just the word hello.
[2m           vcr_path[0m = /tmp/.tmpgC3Hxi/live_provider_vcr/live-e2e-openai-gpt-4o-mini.json
[2m[   0.741s][0m [32mINFO [0m [2m[live_e2e][0m Provider call completed
[2m           provider[0m = openai
[2m           model[0m = gpt-4o-mini
[2m           status[0m = passed
[2m           elapsed_ms[0m = 739
[2m           response_status[0m = 200
[2m           request_url[0m = https://api.openai.com/v1/responses
[2m           request_body_bytes[0m = 283
[2m           events[0m = 5
[2m           tool_calls[0m = 0
[2m           text_chars[0m = 6
[2m           thinking_chars[0m = 0
[2m           usage_input[0m = 31
[2m           usage_output[0m = 3
[2m           usage_total[0m = 34
[2m           stop_reason[0m = Stop
[2m[   0.754s][0m [32mINFO [0m [2m[harness][0m Test completing
[2m           elapsed[0m = 0.754s
=== ARTIFACTS ===
[   0.741s] live_provider_results.jsonl -> /tmp/.tmpgC3Hxi/live_provider_results.jsonl
[   0.741s] live_provider_results.contract.jsonl -> /tmp/.tmpgC3Hxi/live_provider_results.contract.jsonl
[   0.742s] live_provider_costs.jsonl -> /tmp/.tmpgC3Hxi/live_provider_costs.jsonl
[   0.742s] live_provider_log.jsonl -> /tmp/.tmpgC3Hxi/live_provider_log.jsonl
[   0.748s] live_provider_log.normalized.jsonl -> /tmp/.tmpgC3Hxi/live_provider_log.normalized.jsonl
[   0.749s] live_provider_artifacts.jsonl -> /tmp/.tmpgC3Hxi/live_provider_artifacts.jsonl
[   0.750s] live_provider_artifacts.normalized.jsonl -> /tmp/.tmpgC3Hxi/live_provider_artifacts.normalized.jsonl
[   0.750s] export/live_provider_results.raw.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T184732Z/openai/export/live_provider_results.raw.jsonl
[   0.750s] export/live_provider_results.contract.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T184732Z/openai/export/live_provider_results.contract.jsonl
[   0.750s] export/live_provider_costs.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T184732Z/openai/export/live_provider_costs.jsonl
[   0.750s] export/live_provider_log.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T184732Z/openai/export/live_provider_log.jsonl
[   0.750s] export/live_provider_log.normalized.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T184732Z/openai/export/live_provider_log.normalized.jsonl
[   0.750s] export/live_provider_artifacts.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T184732Z/openai/export/live_provider_artifacts.jsonl
[   0.750s] export/live_provider_artifacts.normalized.jsonl -> /data/projects/pi_agent_rust/tests/e2e_results/20260206T184732Z/openai/export/live_provider_artifacts.normalized.jsonl
=== END ARTIFACTS ===
=== END LOGS ===

test e2e_live_provider_harness_smoke ... FAILED

failures:

failures:
    e2e_live_provider_harness_smoke

test result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 43 filtered out; finished in 0.76s

error: test failed, to rerun pass `--test e2e_live_harness`
